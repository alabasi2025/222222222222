# ููุฎุต ุงูุชูููุฐ - ุฅููุงู ูุธุงู ุณูุฏุงุช ุงูุตุฑู/ุงููุจุถ

ุชุงุฑูุฎ ุงูุชูููุฐ: 2026-01-11

---

## โ ุงูููุงู ุงูููุชููุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
- โ ุฅูุดุงุก ุฌุฏูู `payment_vouchers` (ุณูุฏุงุช ุงูุตุฑู/ุงููุจุถ)
- โ ุฅูุดุงุก ุฌุฏูู `payment_voucher_operations` (ุนูููุงุช ุงูุณูุฏุงุช)
- โ ุฅูุดุงุก ุงูููุงุฑุณ (Indexes) ุงูููุงุณุจุฉ
- โ ุฑุจุท ุงูุฌุฏุงูู ุจุงูุฌุฏุงูู ุงูุฃุฎุฑู (Foreign Keys)
- โ ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. Backend API โ
- โ ุฅูุดุงุก API route `/api/payments`
- โ ุฏุนู ุฌููุน ุงูุนูููุงุช CRUD:
  - `GET /api/payments` - ุฌูุจ ุฌููุน ุงูุณูุฏุงุช
  - `GET /api/payments/:id` - ุฌูุจ ุณูุฏ ูุญุฏุฏ
  - `POST /api/payments` - ุฅูุดุงุก ุณูุฏ ุฌุฏูุฏ
  - `PUT /api/payments/:id` - ุชุญุฏูุซ ุณูุฏ
  - `DELETE /api/payments/:id` - ุญุฐู ุณูุฏ
- โ ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุตูุงุฏูู ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก/ุญุฐู ุงูุณูุฏ
- โ ุฏุนู ุงูุนูููุงุช ุงููุชุนุฏุฏุฉ ูู ุงูุณูุฏ ุงููุงุญุฏ
- โ ุฏุนู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ ูุฃุณุนุงุฑ ุงูุตุฑู

### 3. Frontend API Client โ
- โ ุฅุถุงูุฉ `paymentsApi` ูู `client/src/lib/api.ts`
- โ ุฏุนู ุฌููุน ุนูููุงุช CRUD
- โ ุฏุนู ุงูุชุตููุฉ ุญุณุจ ุงูููุงู ูุงูููุน

### 4. Frontend Integration โ
- โ ุฑุจุท ุตูุญุฉ Payments ูุน API
- โ ุชุญููู ุงูุณูุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญูุธ ุณูุฏ ุงูุตุฑู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุญุฏูุซ ุงููุงุฌูุฉ ุจุนุฏ ุงูุญูุธ
- โ ุฅุนุงุฏุฉ ุชุญููู ุฃุฑุตุฏุฉ ุงูุตูุงุฏูู ุจุนุฏ ุงูุญูุธ

---

## ๐ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู payment_vouchers
```sql
- id (PK)
- entity_id (FK -> entities)
- type ('in' | 'out')
- cash_box_id (FK -> cash_boxes)
- date
- currency
- exchange_rate
- total_amount
- reference
- created_by
- created_at
- updated_at
```

### ุฌุฏูู payment_voucher_operations
```sql
- id (PK)
- voucher_id (FK -> payment_vouchers, CASCADE DELETE)
- account_type
- account_subtype
- chart_account_id (FK -> accounts)
- analytical_account_id (FK -> accounts)
- amount
- description
- created_at
```

---

## ๐ ุงูุชุฏูู (Flow)

### ุฅูุดุงุก ุณูุฏ ุตุฑู ุฌุฏูุฏ:
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ ูู Frontend
2. Frontend ูุฑุณู ุงูุจูุงูุงุช ุฅูู API (`POST /api/payments`)
3. Backend ูุญูุธ ุงูุณูุฏ ูู `payment_vouchers`
4. Backend ูุญูุธ ุงูุนูููุงุช ูู `payment_voucher_operations`
5. Backend ูุญุฏูุซ ุฑุตูุฏ ุงูุตูุฏูู (ูุฎุตู ุงููุจูุบ)
6. Backend ูุนูุฏ ุงูุณูุฏ ุงููุญููุธ ุฅูู Frontend
7. Frontend ูุนุฑุถ ุงููุชูุฌุฉ ููุญุฏูุซ ุงููุงุฆูุฉ

### ุชุญููู ุงูุณูุฏุงุช:
1. Frontend ูุณุชุฏุนู API (`GET /api/payments?entityId=...`)
2. Backend ูุฌูุจ ุงูุณูุฏุงุช ูุงูุนูููุงุช ุงููุฑุชุจุทุฉ
3. Backend ูุนูุฏ ุงูุจูุงูุงุช ุฅูู Frontend
4. Frontend ูุนุฑุถ ุงูุณูุฏุงุช ูู ุงูุฌุฏูู

---

## ๐ฏ ุงูููุฒุงุช ุงูููุชููุฉ

- โ ุญูุธ ุณูุฏุงุช ุงูุตุฑู/ุงููุจุถ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญูุธ ุงูุนูููุงุช ุงููุชุนุฏุฏุฉ ููู ุณูุฏ
- โ ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุตูุงุฏูู ุชููุงุฆูุงู
- โ ุฏุนู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ
- โ ุฏุนู ุฃุณุนุงุฑ ุงูุตุฑู
- โ ุชุญููู ุงูุณูุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุนุฑุถ ุงูุณูุฏุงุช ูู ุงููุงุฌูุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุตูุงุฏูู**: ูุชู ุชุญุฏูุซ ุฑุตูุฏ ุงูุตูุฏูู ุชููุงุฆูุงู ุนูุฏ:
   - ุฅูุดุงุก ุณูุฏ ุตุฑู (ูุฎุตู ุงููุจูุบ)
   - ุฅูุดุงุก ุณูุฏ ูุจุถ (ูุถูู ุงููุจูุบ)
   - ุญุฐู ุณูุฏ (ูุนูุณ ุงูุนูููุฉ)

2. **ุญุฐู ุงูุณูุฏุงุช**: ุนูุฏ ุญุฐู ุณูุฏุ ูุชู ุญุฐู ุฌููุน ุงูุนูููุงุช ุงููุฑุชุจุทุฉ ุจู ุชููุงุฆูุงู (CASCADE DELETE)

3. **ุงูุนููุงุช**: ุงููุธุงู ูุฏุนู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ (YER, SAR, USD) ูุน ุฃุณุนุงุฑ ุตุฑู

---

## ๐ ุงูููุงู ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑูุฉ)

- [ ] ุฑุจุท ุงูุณูุฏุงุช ุจุงูููุฏ ุงููุญุงุณุจู (Journal Entry)
- [ ] ุชุทููุฑ ุชูุฑูุฑ ุณูุฏุงุช ุงูุตุฑู/ุงููุจุถ
- [ ] ุชุทููุฑ ุชูุฑูุฑ ุงูุชุฏูู ุงูููุฏู
- [ ] ุฅุถุงูุฉ ูุธููุฉ ุงูุทุจุงุนุฉ
- [ ] ุฅุถุงูุฉ ูุธููุฉ ุงูุชุนุฏูู
- [ ] ุฅุถุงูุฉ ูุธููุฉ ุงูุญุฐู ูู ุงููุงุฌูุฉ

---

**ุญุงูุฉ ุงูุชูููุฐ**: โ ููุชูู 100%

**ุงูุชุงุฑูุฎ**: 2026-01-11
